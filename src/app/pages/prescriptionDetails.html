<div class="ui-grid-row">
	<div class="ui-g-12 ui-sm-12" style="padding: 15px;">
		<div class="ui-grid ui-grid-responsive" *ngIf="prescription">
			<div class="ui-grid-row">
				<div class="ui-grid-col-4 ui-sm-12">
					<div class="ui-grid-row">
						<div class="ui-grid-col-3 ui-sm-12">
							<label i18n="@@prescriptionDatetime" for="prescriptionDatetime">Presc. Date Time<font color="red">*</font></label> 
						</div>
						<div class="ui-grid-col-8 ui-sm-12">
							<p-calendar [(ngModel)]="prescription.prescriptionDatetime" [showTime]="true"></p-calendar>
						</div>
						<div class="ui-grid-col-1 ui-sm-12">
						</div>
					</div>
				</div>
				<div class="ui-grid-col-4 ui-sm-12">
					<div class="ui-grid-row">
						<div class="ui-grid-col-3 ui-sm-12">
							<label i18n="@@prescriptionType" for="prescriptionType">Prescription Type<font color="red">*</font></label> 
						</div>
						<div class="ui-grid-col-8 ui-sm-12">
							<p-radioButton name="prescriptionType" value="0" label="New" [(ngModel)]="prescription.prescriptionType"></p-radioButton>
							<p-radioButton name="prescriptionType" value="1" label="Old" [(ngModel)]="prescription.prescriptionType"></p-radioButton>
						</div>
						<div class="ui-grid-col-1 ui-sm-12">
						</div>
					</div>
				</div>
				<div class="ui-grid-col-4 ui-sm-12">
					<div class="ui-grid-row">
						<div class="ui-grid-col-3 ui-sm-12">
							<label i18n="@@notes" for="notes">Notes</label> 
						</div>
						<div class="ui-grid-col-8 ui-sm-12">
							<textarea pInputTextarea id="notes" rows="4" cols="40" pInputTextarea maxlength="1000" 
								[(ngModel)]="prescription.notes" #notes="ngModel"> </textarea>							
						</div>
						<div class="ui-grid-col-1 ui-sm-12">
						</div>
					</div>
				</div>
			</div>
			
			<div class="ui-grid-row">
				<div class="ui-grid-col-12 ui-sm-12">
					<p-table [columns]="medicineCols" [value]="prescription.prescriptionMedicines">
					    <ng-template pTemplate="header" let-medicineCols>
					        <tr>
					            <th *ngFor="let col of medicineCols" [pSortableColumn]="col.field">
					                {{col.header}}
					                <p-sortIcon [field]="col.field"></p-sortIcon>
					            </th>
					            <th>Action</th>
					        </tr>
					    </ng-template>
					    <ng-template pTemplate="body" let-rowData let-columns="columns">
					        <tr>			           
					            <td *ngFor="let col of columns" pEditableColumn>
					            	<p-cellEditor *ngIf="col.header != 'Name'">
					                    <ng-template pTemplate="input">
					                        <input type="text" [(ngModel)]="rowData[col.field]">
					                    </ng-template>
					                    <ng-template pTemplate="output">
					                        {{rowData[col.field]}}
					                    </ng-template>
					                </p-cellEditor>
					                <p-cellEditor *ngIf="col.header == 'Name'">
					                    <ng-template pTemplate="input">
					                        <p-autoComplete [(ngModel)]="rowData[col.field]"
												(onDropdownClick)="productDropdown.handleDropdownClick($event)"
												[suggestions]="productDropdown.filteredProducts" [dropdown]="true"
												(completeMethod)="productDropdown.filter($event)"
												name="name" field="name" [size]="30" placeholder=""
												[minLength]="1">
											</p-autoComplete>
					                    </ng-template>
					                    <ng-template pTemplate="output">
					                        {{rowData[col.field].name}}
					                    </ng-template>
					                </p-cellEditor>
					            </td>
					            <td>
					            	<button type="button" pButton icon="fa-plus" style="float: left"
										></button>
									<button type="button" pButton icon="fa-eraser" style="float: left"
										></button>
					            </td>
					        </tr>
					    </ng-template>
					</p-table>
				</div>
			</div>
			
			<br/>
			<br />
			
			<div class="ui-grid-row">
				<div class="ui-grid-col-12 ui-sm-12">
					<p-table [columns]="diagnosisCols" [value]="prescription.prescriptionDiagnoses">
					    <ng-template pTemplate="header" let-diagnosisCols>
					        <tr>
					            <th *ngFor="let col of diagnosisCols" [pSortableColumn]="col.field">
					                {{col.header}}
					                <p-sortIcon [field]="col.field"></p-sortIcon>
					            </th>
					            <th>Action</th>
					        </tr>
					    </ng-template>
					    <ng-template pTemplate="body" let-rowData let-columns="columns">
					        <tr>			           
					            <td *ngFor="let col of columns" pEditableColumn>
					            	<p-cellEditor>
					                    <ng-template pTemplate="input">
					                        <input type="text" [(ngModel)]="rowData[col.field]">
					                    </ng-template>
					                    <ng-template pTemplate="output">
					                        {{rowData[col.field]}}
					                    </ng-template>
					                </p-cellEditor>
					            </td>
					            <td>
					            	<button type="button" pButton icon="fa-plus" style="float: left"></button>
									<button type="button" pButton icon="fa-eraser" style="float: left"></button>
					            </td>
					        </tr>
					    </ng-template>
					</p-table>
				</div>
			</div>
			<div *ngIf="error" class="alert alert-danger">{{error}}</div>
			<div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
				<button type="button" pButton icon="fa-close" (click)="delete()"
					label="Supprimer"></button>
				<button type="button" pButton icon="fa-check" (click)="save()"
					label="Sauvegarder"></button>
			</div>
		</div>
	</div>
</div>